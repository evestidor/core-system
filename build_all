#!/bin/bash
set -e

function getLatestCode() {
    git checkout master
    git pull origin master
}

function buildImage() {
    config/build-image
}

echo "Building UI image"
cd core-ui
getLatestCode
buildImage
cd ..

echo "Building API Gateway image"
cd core-api-gateway
getLatestCode
buildImage
cd ..

echo "Building Stock manager image"
cd svc-stock-manager
getLatestCode
buildImage
cd ..
